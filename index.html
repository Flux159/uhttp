<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>uhttp by Flux159</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">uhttp</h1>
      <h2 class="project-tagline">A micro client-side ajax library modeled after angularjs&#39;s http module that doesn&#39;t require any dependencies</h2>
      <a href="https://github.com/Flux159/uhttp" class="btn">View on GitHub</a>
      <a href="https://github.com/Flux159/uhttp/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Flux159/uhttp/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="uhttp" class="anchor" href="#uhttp" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp</h1>

<p>A micro client-side ajax library modeled after angularjs's $http module that doesn't require any dependencies (jquery or otherwise).</p>

<p>uhttp is about 6kb minified and about 2.3kb minified and compressed.</p>

<p>uhttp supports setting headers globally for all requests and setting headers individually for each request. It also automatically parses json in responses with the appropriate content type. uhttp is based off of <a href="https://github.com/toddmotto/atomic">atomic</a> and angularjs's <a href="https://github.com/angular/angular.js/blob/v1.3.x/src/ng/http.js">$http</a>. uhttp was written because atomic didn't support common features (setting headers &amp; sending json POST requests) and <a href="https://facebook.github.io/react/index.html">React</a> didn't come with a built in ajax library (recommending jQuery's ajax instead).</p>

<p>Note that uhttp does not use true <a href="https://github.com/jakearchibald/es6-promise">promises</a>.</p>

<h4>
<a id="downloading--setting-up" class="anchor" href="#downloading--setting-up" aria-hidden="true"><span class="octicon octicon-link"></span></a>Downloading &amp; Setting up</h4>

<p>Download the minified build <a href="">here</a>, put into your public scripts directory, and add to your webpage by adding the following tag:</p>

<pre><code>&lt;script type="application/javascript" src="/scripts/uhttp.min.js"&gt;&lt;/script&gt;
</code></pre>

<p>Alternatively, you can install from bower as well:</p>

<pre><code>bower install uhttp --save
</code></pre>

<h4>
<a id="uhttpgeturl-options" class="anchor" href="#uhttpgeturl-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.get(url, [,options])</h4>

<p>Use uhttp.get() to make a GET request. You can use either "then... catch" callbacks to obtain the response.</p>

<div class="highlight highlight-javascript"><pre>uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint<span class="pl-pds">'</span></span>).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Successful response</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});
</pre></div>

<p>You can specify options by passing an options object to any request (see the Options section for more information):</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>custom<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>header<span class="pl-pds">'</span></span>
    },
    withCredentials<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    timeout<span class="pl-k">:</span> <span class="pl-c1">3000</span> <span class="pl-c">//3 seconds; '0' for no timeout</span>
};

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});
</pre></div>

<h4>
<a id="uhttpposturl-options-data" class="anchor" href="#uhttpposturl-options-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.post(url, [,options] [,data])</h4>

<p>Use uhttp.post() to make a POST request. By default, the content type for JSON and FormData (multipart/form-data NOT application/x-www-form-urlencoded) is automatically set for you. To change this, either set a global default for the "Content-Type" header, or pass it in as an option.</p>

<div class="highlight highlight-javascript"><pre>uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/post<span class="pl-pds">'</span></span>, {some<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<p>Example using FormData (Content-Type: multipart/form-data) in javascript:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> formElement <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">"</span>myform<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> formData <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FormData</span>(formElement);
formData.append(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>cat<span class="pl-pds">"</span></span>);
uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/post/form/multipart<span class="pl-pds">'</span></span>, formData).then(<span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h5>
<a id="posting-x-www-form-urlencoded-data" class="anchor" href="#posting-x-www-form-urlencoded-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Posting x-www-form-urlencoded data</h5>

<p>Here is an example of posting x-www-form-urlencoded data. Note that if you want all requests sent with these options by default, use uhttp.setGlobalOptions (see documentation below).</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> data <span class="pl-k">=</span> {
    content<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Sending json object as x-www-form-urlencoded<span class="pl-pds">'</span></span>
};

<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-www-form-urlencoded<span class="pl-pds">'</span></span>},
    <span class="pl-en">transformRequestData</span>: <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
        <span class="pl-k">var</span> str <span class="pl-k">=</span> [];
        <span class="pl-k">for</span>(<span class="pl-k">var</span> p <span class="pl-k">in</span> data) {
            str.<span class="pl-c1">push</span>(encodeURIComponent(p) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>=<span class="pl-pds">"</span></span> <span class="pl-k">+</span> encodeURIComponent(data[p]));
        }
        <span class="pl-k">return</span> str.<span class="pl-c1">join</span>(<span class="pl-s"><span class="pl-pds">"</span>&amp;<span class="pl-pds">"</span></span>);
}};

uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/post/form/urlencoded<span class="pl-pds">'</span></span>, options, data).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<p>Example setting a custom content type:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> myCustomData <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>&lt;custom&gt;xml&lt;/custom&gt;<span class="pl-pds">'</span></span>;
uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/post<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/xml<span class="pl-pds">'</span></span>}, myCustomData).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="uhttpput" class="anchor" href="#uhttpput" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.put()</h4>

<p>Use uhttp.put() to make a PUT request. The options are similar to POST requests.</p>

<div class="highlight highlight-javascript"><pre>uhttp.put(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/put<span class="pl-pds">'</span></span>, {some<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="uhttppatch" class="anchor" href="#uhttppatch" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.patch()</h4>

<p>Use uhttp.patch() to make a PATCH request.</p>

<div class="highlight highlight-javascript"><pre>uhttp.patch(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/patch<span class="pl-pds">'</span></span>, {some<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="uhttpdelete" class="anchor" href="#uhttpdelete" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.delete()</h4>

<p>Use uhttp.delete() to send a DELETE request.</p>

<div class="highlight highlight-javascript"><pre>uhttp.delete(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/delete<span class="pl-pds">'</span></span>).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="uhttphead" class="anchor" href="#uhttphead" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.head()</h4>

<p>Use uhttp.head() to send a HEAD request.</p>

<div class="highlight highlight-javascript"><pre>uhttp.head(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/head<span class="pl-pds">'</span></span>).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(xhr.getHeader(<span class="pl-s"><span class="pl-pds">'</span>Custom-Header<span class="pl-pds">'</span></span>));
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="uhttpjsonp" class="anchor" href="#uhttpjsonp" aria-hidden="true"><span class="octicon octicon-link"></span></a>uhttp.jsonp()</h4>

<p>Use uhttp.jsonp() to send a JSONP request. Note that you should define the callback as 'JSON_CALLBACK'. uhttp will generate a global function attached to the window object for the duration of the request and pass its data to the then/catch functions.</p>

<div class="highlight highlight-javascript"><pre>uhttp.jsonp(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/jsonp?callback=JSON_CALLBACK<span class="pl-pds">'</span></span>).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="xsrf" class="anchor" href="#xsrf" aria-hidden="true"><span class="octicon octicon-link"></span></a>Xsrf</h4>

<p>uhttp handles setting an XSRF header for you based on the options xsrfCookieName and xsrfHeaderName options. The default options are cookieName = 'XSRF-TOKEN' and headerName = 'X-XSRF-TOKEN'. Note that uhttp takes the value of the cookie (not the name) and sets the header given by xsrfHeaderName to that value. To change these, specify the options before sending your requests:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> globalOptions <span class="pl-k">=</span> {
    xsrfCookieName<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>CUSTOM-COOKIE-NAME<span class="pl-pds">'</span></span>,
    xsrfHeaderName<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>CUSTOM-HEADER-NAME<span class="pl-pds">'</span></span>
};

uhttp.setGlobalOptions <span class="pl-k">=</span> globalOptions;

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/xsrf/endpoint<span class="pl-pds">'</span></span>).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});
</pre></div>

<h4>
<a id="example-sending-a-file" class="anchor" href="#example-sending-a-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example: Sending a file</h4>

<p>A common use case for POSTing data is to send a file to your server (like an image or video file). uhttp makes that easy by allowing you to specify a progress callback with your POST request. Note that this example uses Xhr2, which is not supported by IE8. Check <a href="http://caniuse.com/#feat=xhr2">caniuse</a> for more information on browser compatibility. For a full example, see the example in /test/testupload.html</p>

<div class="highlight highlight-javascript"><pre>
<span class="pl-k">var</span> files <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>upload-input-element<span class="pl-pds">'</span></span>).files;

<span class="pl-k">var</span> file <span class="pl-k">=</span> files[<span class="pl-c1">0</span>];

<span class="pl-k">var</span> data <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FormData</span>();
data.append(<span class="pl-s"><span class="pl-pds">'</span>userfile<span class="pl-pds">'</span></span>, file);

<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    <span class="pl-en">progressHandler</span>: <span class="pl-k">function</span>(<span class="pl-smi">event</span>) {
        <span class="pl-k">if</span>(<span class="pl-c1">event</span>.lengthComputable) {
            <span class="pl-k">var</span> percentageLoaded <span class="pl-k">=</span> <span class="pl-c1">event</span>.loaded / <span class="pl-c1">event</span>.total;
            <span class="pl-c1">document</span>.findElementById(<span class="pl-s"><span class="pl-pds">'</span>upload-progress-bar<span class="pl-pds">'</span></span>).<span class="pl-c1">setAttribute</span>(<span class="pl-s"><span class="pl-pds">'</span>style<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>width: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> percentageLoaded <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span>);
        }
    }
};

uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/upload/endpoint<span class="pl-pds">'</span></span>, options, data).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});
</pre></div>

<h4>
<a id="example-authorization-tokens" class="anchor" href="#example-authorization-tokens" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example: Authorization Tokens</h4>

<p>If your requests require tokens, you can specify them as custom headers (also note that you can set these globally for all requests by calling uhttp.setGlobalOptions(globalOptions).</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> MY_TOKEN <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>CUSTOM_AUTH_TOKEN<span class="pl-pds">'</span></span>;
<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>Authorization<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Bearer <span class="pl-pds">'</span></span> <span class="pl-k">+</span> MY_TOKEN
    }
};

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/protected/api/endpoint<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="example-cors-cross-origin-requests" class="anchor" href="#example-cors-cross-origin-requests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example: CORS (Cross Origin Requests)</h4>

<p>CORS is a way of sending requests to a different domain than the one you are currently browsing. CORS is enabled on a server by setting the appropriate headers on the server.</p>

<p>Server pseudo code:</p>

<div class="highlight highlight-javascript"><pre>response.header(<span class="pl-s"><span class="pl-pds">'</span>Access-Control-Allow-Origin<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>http://example.com<span class="pl-pds">'</span></span>);
response.header(<span class="pl-s"><span class="pl-pds">'</span>Access-Control-Allow-Methods<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>GET,PUT,POST,DELETE<span class="pl-pds">'</span></span>);
response.header(<span class="pl-s"><span class="pl-pds">'</span>Access-Control-Allow-Headers<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span>);
response.header(<span class="pl-s"><span class="pl-pds">'</span>Access-Control-Allow-Credentials<span class="pl-pds">'</span></span>, <span class="pl-c1">true</span>);</pre></div>

<p>Using uhttp, if the server has required credentials (by the 'Access-Control-Allow-Credentials' header), you would need to set the withCredentials option to correctly send your request. You would also need to set any authorization headers the server requires (tokens, etc.).</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> MY_TOKEN <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>CUSTOM_AUTH_TOKEN<span class="pl-pds">'</span></span>;
<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>Authorization<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Bearer <span class="pl-pds">'</span></span> <span class="pl-k">+</span> MY_TOKEN
    },
    withCredentials<span class="pl-k">:</span> <span class="pl-c1">true</span>
};

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://subdomain.example.com/protected/api/endpoint<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});
</pre></div>

<h4>
<a id="global-options" class="anchor" href="#global-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global Options</h4>

<p>You can set global options by using the uhttp.setGlobalOptions(options) method. Note that "global" means on each page. If you are not using a single page web application architecture, you will need to set these options in a common script across all your pages. In a single page application architecture, this works as expected after setting once.</p>

<div class="highlight highlight-javascript"><pre>uhttp.setGlobalOptions({
    headers<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>Custom<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Global-Header<span class="pl-pds">'</span></span>
    },
    timeout<span class="pl-k">:</span> <span class="pl-c1">2000</span>, <span class="pl-c">//Set timeout to 2 seconds</span>
    withCredentials<span class="pl-k">:</span> <span class="pl-c1">true</span>, <span class="pl-c">//Set withCredentials on xhr requests,</span>
    <span class="pl-en">transformRequest</span>: <span class="pl-k">function</span>(<span class="pl-smi">xhr</span>) {}, <span class="pl-c">//Transform xhr before sending (also before transformRequestData)</span>
    <span class="pl-en">transformResponse</span>: <span class="pl-k">function</span>(<span class="pl-smi">xhr</span>) {}, <span class="pl-c">//Transform xhr after response (but before transformResponseData)</span>
    <span class="pl-en">transformRequestData</span>: <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {<span class="pl-k">return</span> data;}, <span class="pl-c">//Transform requests before sending</span>
    <span class="pl-en">transformResponseData</span>: <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {<span class="pl-k">return</span> data;}, <span class="pl-c">//Transform returned responses</span>
    caching<span class="pl-k">:</span> <span class="pl-c1">true</span> <span class="pl-k">||</span> [Cache object] <span class="pl-k">||</span> {cache<span class="pl-k">:</span> [Cache object], options<span class="pl-k">:</span> {timeout<span class="pl-k">:</span> <span class="pl-c1">120000</span>}}, <span class="pl-c">//Set whether to globally cache all requests (not recommended - use individual request options instead)</span>
    xsrfCookieName<span class="pl-k">:</span> <span class="pl-c1">String</span>, <span class="pl-c">//The name of the cookie where you store your xsrfToken</span>
    xsrfHeaderName<span class="pl-k">:</span> <span class="pl-c1">String</span> <span class="pl-c">//The name of the header to set the xsrfToken</span>
});</pre></div>

<p>You can also retrieve the global default options by using the uhttp.getGlobalOptions() method</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> globalAjaxOptions <span class="pl-k">=</span> uhttp.getGlobalOptions();
<span class="pl-en">console</span><span class="pl-c1">.log</span>(globalAjaxOptions);</pre></div>

<h4>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h4>

<p>The options object is the same as the globalOptions object above except it can be passed with each individual request.</p>

<h6>
<a id="custom-headers" class="anchor" href="#custom-headers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Headers</h6>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>Custom<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Header<span class="pl-pds">'</span></span>
    }
};

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h6>
<a id="timeouts" class="anchor" href="#timeouts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Timeouts</h6>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> options <span class="pl-k">=</span> {
    timeout<span class="pl-k">:</span> <span class="pl-c1">2000</span> <span class="pl-c">//Timeout of 2 seconds</span>
};

uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h4>
<a id="transforming-requests-responses-and-data" class="anchor" href="#transforming-requests-responses-and-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transforming Requests, Responses, and Data</h4>

<p>uhttp lets you transform requests and responses before they're sent / after their returned (globally or per request). This is useful if you need to modify how uhttp processes its requests by default.</p>

<h6>
<a id="transform-request-transformrequest--transform-response-transformresponse" class="anchor" href="#transform-request-transformrequest--transform-response-transformresponse" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transform Request (transformRequest) &amp; Transform Response (transformResponse)</h6>

<p>To modify the xhr object that uhttp uses before sending, set the transformRequest option.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> options <span class="pl-k">=</span> {
    <span class="pl-en">transformRequest</span>: <span class="pl-k">function</span>(<span class="pl-smi">config</span>) {
        <span class="pl-c">//Changes the source of the request</span>
        config.<span class="pl-c1">src</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get/again<span class="pl-pds">'</span></span>;

        <span class="pl-k">return</span> config;
    },
    <span class="pl-en">transformResponse</span>: <span class="pl-k">function</span>(<span class="pl-smi">xhr</span>) {
        <span class="pl-c">//Changes the response</span>
        xhr.<span class="pl-c1">responseText</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>{"data": "Man in the middle!"}<span class="pl-pds">'</span></span>;
    }
};

<span class="pl-c1">window</span>.uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(res.<span class="pl-c1">data</span>); <span class="pl-c">//prints "Man in the middle!"</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Do nothing</span>
}).finally(<span class="pl-k">function</span>() {
    done();
});</pre></div>

<h6>
<a id="transform-request-data-transformrequestdata" class="anchor" href="#transform-request-data-transformrequestdata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transform Request Data (transformRequestData)</h6>

<p>To modify the data that uhttp sends with the request, set the transformRequestData option. This is necessary if you're sending x-www-form-urlencoded data.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> data <span class="pl-k">=</span> {
    content<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Sending json object as x-www-form-urlencoded<span class="pl-pds">'</span></span>
};

<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    headers<span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-www-form-urlencoded<span class="pl-pds">'</span></span>},
    <span class="pl-en">transformRequestData</span>: <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
        <span class="pl-k">var</span> str <span class="pl-k">=</span> [];
        <span class="pl-k">for</span>(<span class="pl-k">var</span> p <span class="pl-k">in</span> data) {
            str.<span class="pl-c1">push</span>(encodeURIComponent(p) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>=<span class="pl-pds">"</span></span> <span class="pl-k">+</span> encodeURIComponent(data[p]));
        }
        <span class="pl-k">return</span> str.<span class="pl-c1">join</span>(<span class="pl-s"><span class="pl-pds">"</span>&amp;<span class="pl-pds">"</span></span>);
}};

uhttp.post(<span class="pl-s"><span class="pl-pds">'</span>/api/endpoint/post/form/urlencoded<span class="pl-pds">'</span></span>, options, data).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-c">//Success</span>
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Error</span>
});</pre></div>

<h6>
<a id="transform-response-data-transformresponsedata" class="anchor" href="#transform-response-data-transformresponsedata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transform Response Data (transformResponseData)</h6>

<p>To modify the data that uhttp gets after getting a response, set the transformResponseData option.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">//This is the default transformResponseData that uhttp uses to parse JSON responses</span>
<span class="pl-k">var</span> options <span class="pl-k">=</span> {
    <span class="pl-en">transformResponseData</span>: <span class="pl-k">function</span>(<span class="pl-smi">req</span>) {
        <span class="pl-k">var</span> result;
        <span class="pl-k">var</span> d <span class="pl-k">=</span> req.<span class="pl-c1">responseText</span>;
        <span class="pl-k">try</span> {
            result <span class="pl-k">=</span> JSON.<span class="pl-c1">parse</span>(d);
        } <span class="pl-k">catch</span>(e) {
            result <span class="pl-k">=</span> d;
        }
        <span class="pl-k">return</span> result;
    }
}

<span class="pl-c1">window</span>.uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get<span class="pl-pds">'</span></span>, options).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(res.<span class="pl-c1">data</span>);
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Do nothing</span>
}).finally(<span class="pl-k">function</span>() {
    done();
});
</pre></div>

<h6>
<a id="caching" class="anchor" href="#caching" aria-hidden="true"><span class="octicon octicon-link"></span></a>Caching</h6>

<p>uhttp provides a basic caching mechanism where you can cache your GET responses (no xhr request is sent). By default, setting the cache option to true enables this and uses uhttp's default cache. If you need a custom cache object, you can use uhttp's CacheFactory to create a custom cache object that you can manually clear and set timeouts for. Note: Caching only works for GET requests.</p>

<div class="highlight highlight-javascript"><pre>uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get<span class="pl-pds">'</span></span>, {cache<span class="pl-k">:</span> <span class="pl-c1">true</span>}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Sends xhr request</span>
   uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get<span class="pl-pds">'</span></span>, {cache<span class="pl-k">:</span> <span class="pl-c1">true</span>}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
        <span class="pl-c">//From javascript cache, no xhr request sent</span>
   }).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
        <span class="pl-c">//Do nothing</span>
   });
}).catch(<span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    <span class="pl-c">//Do nothing</span>
});</pre></div>

<p>Custom cache objects:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> cacheFactory <span class="pl-k">=</span> uhttp.CacheFactory;
<span class="pl-k">var</span> blogCache <span class="pl-k">=</span> cacheFactory.get(<span class="pl-s"><span class="pl-pds">'</span>blogCache<span class="pl-pds">'</span></span>);

blogCache.put(<span class="pl-s"><span class="pl-pds">'</span>firstpost<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>My blog<span class="pl-pds">'</span></span>);
blogCache.put(<span class="pl-s"><span class="pl-pds">'</span>secondpost<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>stuff<span class="pl-pds">'</span></span>);
blogCache.delete(<span class="pl-s"><span class="pl-pds">'</span>firstpost<span class="pl-pds">'</span></span>);
blogCache.get(<span class="pl-s"><span class="pl-pds">'</span>secondpost<span class="pl-pds">'</span></span>);
blogCache.<span class="pl-c1">clear</span>();

<span class="pl-c">//You can pass this cache to uhttp's cache option as well!</span>
uhttp.get(<span class="pl-s"><span class="pl-pds">'</span>http://localhost:43760/api/get<span class="pl-pds">'</span></span>, {cache<span class="pl-k">:</span> blogCache}).then(<span class="pl-k">function</span>(<span class="pl-smi">res</span>, <span class="pl-smi">status</span>, <span class="pl-smi">xhr</span>) {
    <span class="pl-c">//Data is cached in blogCache w/ url as key (you now have control of when to delete from the cache)</span>
});
</pre></div>

<h6>
<a id="cookies-helpers" class="anchor" href="#cookies-helpers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cookies Helpers</h6>

<p>uhttp exposes its cookie helper functions as uhttp.getCookie() and uhttp.setCookie(). These can be helpful if you need to check or change cookie values in your app.</p>

<div class="highlight highlight-javascript"><pre>uhttp.setCookie(<span class="pl-s"><span class="pl-pds">'</span>mycookie<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yum<span class="pl-pds">'</span></span>); <span class="pl-c">//Sets mycookie to 'yum'</span>
uhttp.setCookie(<span class="pl-s"><span class="pl-pds">'</span>othercookie<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yay!<span class="pl-pds">'</span></span>, <span class="pl-c1">365</span>); <span class="pl-c">//Set cookie for 365 days</span>
<span class="pl-en">console</span><span class="pl-c1">.log</span>(uhttp.getCookie(<span class="pl-s"><span class="pl-pds">'</span>mycookie<span class="pl-pds">'</span></span>)); <span class="pl-c">//'yum'</span>
<span class="pl-en">console</span><span class="pl-c1">.log</span>(uhttp.getCookie(<span class="pl-s"><span class="pl-pds">'</span>othercookie<span class="pl-pds">'</span></span>)); <span class="pl-c">//'yay!'</span></pre></div>

<h4>
<a id="development-testing--building" class="anchor" href="#development-testing--building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development, Testing, &amp; Building</h4>

<p>uhttp is developed using a nodejs environment. Make sure that you have nodejs and npm installed, clone this source repository and run the following in the uhttp directory:</p>

<pre><code>npm install &amp;&amp; grunt build
</code></pre>

<p>That will install all dependencies for development, run uhttp's tests, and build a minified version of uhttp in the dist directory.</p>

<p>If you have bug fixes that you want merged into uhttp, submit a pull request on the github repository.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>LICENSE</h2>

<p>The MIT License (MIT)</p>

<p>Copyright (c) 2015 Suyog Sonwalkar</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Flux159/uhttp">uhttp</a> is maintained by <a href="https://github.com/Flux159">Flux159</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47539617-6");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

