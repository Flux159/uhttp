/*! uhttp v1.2.3 | (c) 2017 @flux159 | http://flux159.github.io/uhttp/ */
!function(a,b){"undefined"!=typeof module?module.exports=b():a.uhttp=b(a)}(this,function(){"use strict";function a(a,b){this.name=a,this.data={},b||(b={}),this.timeout=b.timeout||0}function b(a){return null!==a&&"object"==typeof a}function c(a){return null!==a&&"string"==typeof a}function d(a){return"[object File]"===B.call(a)}function e(a){return"[object Blob]"===B.call(a)}function f(a){return"[object FormData]"===B.call(a)}function g(a){return a}function h(a){return a}function i(a){return!b(a)||d(a)||e(a)||f(a)?a:JSON.stringify(a)}function j(a){var b,c=a.responseText;try{b=JSON.parse(c)}catch(d){b=c}return b}function k(a){var b=a,c=document.documentMode;return c&&(C.setAttribute("href",b),b=C.href),C.setAttribute("href",b),{href:C.href,protocol:C.protocol?C.protocol.replace(/:$/,""):"",host:C.host,search:C.search?C.search.replace(/^\?/,""):"",hash:C.hash?C.hash.replace(/^#/,""):"",hostname:C.hostname,port:C.port,pathname:"/"===C.pathname.charAt(0)?C.pathname:"/"+C.pathname}}function l(a){var b=c(a)?k(a):a;return b.protocol===D.protocol&&b.host===D.host}function m(a){if(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return""}return document.cookie}function n(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e+"; path=/"}else document.cookie=a+"="+b+"; path=/"}function o(a){document.cookie=a}function p(a,b){b?document.cookie=a+"=; path="+b+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;":document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function q(a){F=a,F.headers&&b(F.headers)||(F.headers={})}function r(){return F}function s(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function t(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])}function u(a){var b=new Promise(function(b,c){var d="uhttp_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),e=document.createElement("script");y[d]=function(a){e.parentNode.removeChild(e),y[d]=void 0,e=null,d=null,b(a)},e.onerror=function(a){e.parentNode.removeChild(e),y[d]=void 0,e=null,d=null,c(a)},e.src=a.replace("JSON_CALLBACK",d),document.body.appendChild(e)});return b}function v(a,c,g,h){g||(g={});var i=new Promise(function(j,k){var n={};if(s(n,{Accept:"application/json, text/plain, */*"}),("POST"===a||"PUT"===a||"PATCH"===a)&&(!b(h)||d(h)||e(h)||f(h)||s(n,{"Content-Type":G})),s(n,F.headers),b(g.headers)&&s(n,g.headers),l(c)){var o={},p=m(g.xsrfCookieName||F.xsrfCookieName||E.xsrfCookieName);p&&(o[g.xsrfHeaderName||F.xsrfHeaderName||E.xsrfHeaderName]=p,s(n,o))}var q={timeout:g.timeout||F.timeout,cache:g.cache||F.cache,withCredentials:g.withCredentials||F.withCredentials,progressHandler:g.progressHandler||F.progressHandler,transformRequest:g.transformRequest||F.transformRequest||E.transformRequest,transformResponse:g.transformResponse||F.transformResponse||E.transformResponse,transformRequestData:g.transformRequestData||F.transformRequestData||E.transformRequestData,transformResponseData:g.transformResponseData||F.transformResponseData||E.transformResponseData},r={headers:n,options:q,type:a,url:c};q.transformRequest(r);var u=r.options.cache;if("GET"===r.type&&u){var v;if(v="boolean"==typeof u?A.get("__default").get(c):"Cache"===u.constructor.name?u.get(c):u.cache.get(c))return setTimeout(function(){j(v)},0),i}var w=y.XMLHttpRequest||ActiveXObject,x=new w("MSXML2.XMLHTTP.3.0");r.options.progressHandler&&x.upload&&(x.upload.onprogress=r.options.progressHandler),x.open(r.type,r.url,!0),t(x,r.headers),r.options.withCredentials&&(x.withCredentials=!0),x.onreadystatechange=function(){if(4===x.readyState){r.options.transformResponse(x);var b=r.options.transformResponseData(x);x.status>=200&&x.status<300||304===x.status?("GET"===a&&u&&("boolean"==typeof u?A.get("__default").set(c,b):"Cache"===u.constructor.name?u.set(c,b):u.cache.set(c,b,u.options)),j(b,x.status,x)):k(b,x.status,x),r=null,x=null,b=null}},x.send(r.options.transformRequestData(h)),r.options.timeout>0&&setTimeout(function(){x&&x.abort()},r.options.timeout)});return i}function w(a,b){function c(a,c){c.then(function(c){e[a]=c,d++,d===g&&b(f,e)})["catch"](function(c){e[a]=null,f?f.push(c):f=[c],d++,d===g&&b(f,e)})}for(var d=0,e=[],f=null,g=a.length,h=0;g>h;h++){var i=a[h];e.push(null),c(h,i)}}function x(a,b){function c(a,c){c.then(function(c){e[a]={state:"fulfilled",res:c,err:null},d++,d===f&&b(e)})["catch"](function(c){e[a]={state:"rejected",res:null,err:c},d++,d===f&&b(e)})}for(var d=0,e=[],f=a.length,g=0;f>g;g++){var h=a[g];e.push(null),c(g,h)}}var y=window;a.prototype.remove=function(a){delete this.data[a]},a.prototype.clear=function(){this.data={}},a.prototype.set=function(a,b,c){if(this.data[a]=b,c||(c={}),(c.timeout||this.timeout)>0){var d=this;setTimeout(function(){d.remove(a)},c.timeout||this.timeout)}},a.prototype.get=function(a){return this.data[a]};var z=function(){function b(){var b={__default:new a("__default")};return{get:function(c,d){if(b[c])return b[c];var e=new a(c,d);return b[c]=e,e}}}var c=null;return{getFactory:function(){return c||(c=b()),c}}}(),A=z.getFactory(),B=Object.prototype.toString,C=document.createElement("a"),D=k(y.location.href),E={transformRequest:g,transformResponse:h,transformRequestData:i,transformResponseData:j,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},F={headers:{},timeout:0,withCredentials:!1},G="application/json;charset=utf-8",H={};return H.setGlobalOptions=q,H.getGlobalOptions=r,H.CacheFactory=A,H.getCookie=m,H.setCookie=n,H.setCookieFromString=o,H.deleteCookie=p,H.parallel=w,H.settle=x,H.get=function(a,b){return v("GET",a,b)},H.head=function(a,b){return v("HEAD",a,b)},H.put=function(a,b,c){return c||(c=b,b=null),v("PUT",a,b,c)},H.patch=function(a,b,c){return c||(c=b,b=null),v("PATCH",a,b,c)},H.post=function(a,b,c){return c||(c=b,b=null),v("POST",a,b,c)},H["delete"]=function(a,b){return v("DELETE",a,b)},H.jsonp=function(a){return u(a)},H});